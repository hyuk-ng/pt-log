<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="PT ÏùºÏßÄ">
<title>PT ÏùºÏßÄ - BODY SPECTRUM</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800;900&display=swap');
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Noto Sans KR',sans-serif;background:#e8e8e8;padding:10px;padding-bottom:80px;-webkit-user-select:none;user-select:none;}

/* Member Bar */
.member-bar{max-width:780px;margin:0 auto 8px;background:#1a1a1a;border-radius:12px;padding:10px 16px;display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.member-bar label{color:#00d4aa;font-size:12px;font-weight:700;letter-spacing:1px;}
.member-select{padding:6px 12px;border-radius:6px;border:1px solid #444;background:#2a2a2a;color:white;font-size:13px;font-weight:700;font-family:'Noto Sans KR',sans-serif;outline:none;cursor:pointer;min-width:140px;}
.member-select:focus{border-color:#00d4aa;}
.mb{padding:5px 10px;border-radius:6px;border:1px solid #444;background:transparent;color:#ccc;font-size:11px;font-weight:600;cursor:pointer;font-family:'Noto Sans KR',sans-serif;}
.mb:hover{background:#00d4aa;color:#1a1a1a;border-color:#00d4aa;}
.mb.active{background:#00d4aa;color:#1a1a1a;border-color:#00d4aa;}
.member-status{font-size:11px;color:#666;margin-left:auto;}

/* Member Search */
.member-search{width:100%;padding:6px 12px;border-radius:6px;border:1px solid #444;background:#2a2a2a;color:white;font-size:13px;font-weight:600;font-family:'Noto Sans KR',sans-serif;outline:none;}
.member-search:focus{border-color:#00d4aa;}
.member-search::placeholder{color:#777;}
.member-dropdown{position:absolute;top:100%;left:0;right:0;background:#2a2a2a;border:1px solid #444;border-top:none;border-radius:0 0 6px 6px;max-height:200px;overflow-y:auto;z-index:600;display:none;}
.member-dropdown.show{display:block;}
.member-item{padding:8px 12px;color:#ccc;font-size:13px;font-weight:600;cursor:pointer;display:flex;justify-content:space-between;align-items:center;}
.member-item:hover{background:#00d4aa;color:#1a1a1a;}
.member-item .mi-sessions{font-size:10px;color:#888;font-weight:400;}
.member-item:hover .mi-sessions{color:#1a1a1a;}

/* History Bar */
.history-bar{max-width:780px;margin:0 auto 8px;background:#2d2d2d;border-radius:10px;padding:8px 16px;display:none;align-items:center;gap:6px;overflow-x:auto;-webkit-overflow-scrolling:touch;}
.history-bar.show{display:flex;}
.hist-chip{padding:5px 12px;border-radius:16px;border:1px solid #555;background:transparent;color:#aaa;font-size:11px;font-weight:600;cursor:pointer;font-family:'Noto Sans KR',sans-serif;white-space:nowrap;transition:all 0.15s;}
.hist-chip:hover,.hist-chip.active{background:#4CAF50;color:white;border-color:#4CAF50;}
.hist-label{color:#888;font-size:11px;font-weight:600;margin-right:4px;white-space:nowrap;}

.sheet{max-width:780px;margin:0 auto;background:white;padding:28px 30px 20px;box-shadow:0 2px 20px rgba(0,0,0,0.1);}
.header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;}
.header h1{font-size:32px;font-weight:900;color:#1a1a1a;letter-spacing:-1px;}
.logo{font-size:14px;font-weight:800;color:#1a1a1a;display:flex;align-items:center;gap:6px;}
.logo-icon{width:22px;height:22px;background:#1a1a1a;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:11px;font-weight:900;}
.session-grid{display:flex;flex-wrap:wrap;gap:0;margin-bottom:10px;}
.session-num{width:35px;height:26px;border:1px solid #ccc;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:#555;margin-right:-1px;margin-bottom:-1px;cursor:pointer;background:transparent;}
.session-num.marked{background:#e0e0e0;color:#333;font-weight:800;}
.memo-box{border:1px solid #ccc;min-height:45px;margin-bottom:10px;padding:8px;font-size:13px;color:#333;outline:none;}
.info-table{width:100%;border-collapse:collapse;margin-bottom:10px;font-size:13px;}
.info-table td{border:1px solid #ccc;padding:6px 10px;vertical-align:middle;}
.info-table .lc{background:#f5f5f5;font-weight:700;color:#333;width:85px;text-align:center;font-size:12px;}
.info-table .vc{min-width:100px;color:#333;outline:none;}
.info-table .bp{font-size:11px;line-height:1.8;color:#555;}
.hydration-row{display:flex;gap:4px;}
.h-dot{width:20px;height:20px;border-radius:50%;border:2px solid #b0d4f1;cursor:pointer;transition:all 0.15s;}
.h-dot.filled{background:#64b5f6;border-color:#42a5f5;}
.tp-selector{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap;}
.tp-selector label{font-size:12px;font-weight:700;color:#333;}
.tp-select{padding:6px 12px;border:2px solid #1a1a1a;border-radius:6px;font-size:13px;font-weight:700;font-family:'Noto Sans KR',sans-serif;background:white;color:#1a1a1a;outline:none;cursor:pointer;max-width:300px;}
.tp-exercise-name{font-size:11px;color:#888;margin-left:4px;}
.tp-header{background:#1a1a1a;color:white;text-align:center;padding:8px;font-size:16px;font-weight:800;letter-spacing:3px;}
.tp-photos-wrap{display:grid;grid-template-columns:1fr 1fr;gap:0;border:1px solid #ccc;border-top:none;}
.tp-panel{position:relative;overflow:hidden;min-height:180px;background:#f5f5f5;touch-action:none;}
.tp-panel:first-child{border-right:1px solid #ccc;}
.tp-panel img{width:100%;display:block;pointer-events:none;user-select:none;-webkit-user-drag:none;}
.tp-panel-label{position:absolute;top:6px;left:6px;background:rgba(0,0,0,0.65);color:white;font-size:10px;font-weight:700;letter-spacing:1px;padding:3px 10px;border-radius:3px;z-index:30;pointer-events:none;}
/* Photo remove button */
.photo-remove{position:absolute;top:6px;right:6px;width:26px;height:26px;border-radius:50%;background:rgba(0,0,0,0.6);border:none;color:white;font-size:14px;cursor:pointer;z-index:30;display:none;align-items:center;justify-content:center;line-height:1;}
.photo-remove.show{display:flex;}
.photo-remove:hover{background:#e53935;}
.tp-upload-btn{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.06);border:2px dashed #bbb;border-radius:12px;padding:24px 18px;text-align:center;cursor:pointer;color:#999;font-size:13px;z-index:5;}
.tp-upload-btn:hover{border-color:#666;color:#666;}
.tp-upload-btn .icon{font-size:28px;margin-bottom:4px;}
.ann{position:absolute;background:rgba(255,255,255,0.92);border:2px solid;border-radius:4px;padding:3px 7px;font-size:11px;font-weight:700;cursor:grab;white-space:nowrap;z-index:20;box-shadow:1px 1px 4px rgba(0,0,0,0.15);touch-action:none;line-height:1.4;display:flex;align-items:center;gap:3px;}
.ann:active{cursor:grabbing;}
.ann .n{display:inline-flex;width:17px;height:17px;border-radius:50%;align-items:center;justify-content:center;font-size:10px;font-weight:800;color:white;flex-shrink:0;}
.ann .del-ann{display:none;width:15px;height:15px;border-radius:50%;border:none;background:rgba(0,0,0,0.15);color:#888;font-size:9px;cursor:pointer;align-items:center;justify-content:center;margin-left:2px;flex-shrink:0;}
.ann:hover .del-ann{display:inline-flex;}
.ann .del-ann:hover{background:#e53935;color:white;}
.dot{position:absolute;width:10px;height:10px;border-radius:50%;border:2px solid white;cursor:grab;z-index:15;transform:translate(-50%,-50%);touch-action:none;box-shadow:0 0 4px rgba(0,0,0,0.3);}
.dot:active{cursor:grabbing;}
.tp-svg{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10;}
.cues{margin-top:8px;padding:8px 10px;background:#fafafa;border:1px solid #e0e0e0;border-radius:4px;}
.cues-t{font-size:11px;font-weight:800;letter-spacing:2px;color:#e53935;margin-bottom:5px;}
.cues-sub-row{display:flex;align-items:center;justify-content:space-between;margin-top:6px;margin-bottom:3px;}
.cues-sub{font-size:10px;font-weight:600;}
.add-cue-btn{font-size:10px;padding:2px 8px;border:1px solid #ccc;border-radius:4px;background:white;color:#555;cursor:pointer;font-family:'Noto Sans KR',sans-serif;font-weight:600;}
.add-cue-btn:hover{background:#e53935;color:white;border-color:#e53935;}
.cue{display:flex;align-items:center;gap:6px;margin-bottom:3px;font-size:11px;color:#444;line-height:1.5;}
.cue .cn{width:17px;height:17px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:800;color:white;flex-shrink:0;}
.cue-text{flex:1;outline:none;border:none;background:transparent;font-size:11px;color:#444;font-family:'Noto Sans KR',sans-serif;font-weight:500;border-bottom:1px solid transparent;padding:1px 2px;}
.cue-text:focus{border-bottom-color:#e53935;background:#fff8f8;}
.cue-del{width:16px;height:16px;border:none;border-radius:50%;background:transparent;color:#ccc;font-size:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.cue-del:hover{background:#e53935;color:white;}
.ex-table{width:100%;border-collapse:collapse;margin-top:10px;font-size:13px;}
.ex-table th{background:#1a1a1a;color:white;padding:7px 10px;font-weight:700;font-size:12px;letter-spacing:1px;border:1px solid #1a1a1a;}
.ex-table td{border:1px solid #ccc;padding:8px 10px;height:34px;outline:none;color:#333;}
.toolbar{position:fixed;bottom:14px;left:50%;transform:translateX(-50%);display:flex;gap:6px;background:rgba(30,30,30,0.95);padding:8px 12px;border-radius:14px;box-shadow:0 4px 24px rgba(0,0,0,0.4);z-index:500;flex-wrap:wrap;justify-content:center;}
.tb{padding:7px 12px;border-radius:8px;border:1px solid #444;background:transparent;color:white;font-size:11px;font-weight:600;font-family:'Noto Sans KR',sans-serif;cursor:pointer;white-space:nowrap;transition:all 0.2s;}
.tb:hover{background:#00d4aa;color:#111;border-color:#00d4aa;}
.tb.save-btn{background:#4CAF50;color:white;border-color:#4CAF50;}
.tb.save-btn:hover{background:#388E3C;}
.tb.cap{background:#00d4aa;color:#111;border-color:#00d4aa;}
.tb.new-btn{background:#FF9800;color:white;border-color:#FF9800;}
.tb.new-btn:hover{background:#F57C00;}
.tb.saving{background:#ffa502;color:#111;border-color:#ffa502;pointer-events:none;}
body.capture .toolbar{display:none!important;}
body.capture .dot{display:none!important;}
body.capture .ann{cursor:default!important;}
body.capture .ann .del-ann{display:none!important;}
body.capture .tp-upload-btn{display:none!important;}
body.capture .tp-selector{display:none!important;}
body.capture .add-cue-btn{display:none!important;}
body.capture .cue-del{display:none!important;}
body.capture .cue-text{border-bottom-color:transparent!important;background:transparent!important;}
body.capture .member-bar{display:none!important;}
body.capture .history-bar{display:none!important;}
body.capture .photo-remove{display:none!important;}
/* Modal */
.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:8000;display:none;align-items:center;justify-content:center;backdrop-filter:blur(4px);}
.modal-overlay.show{display:flex;}
.modal-box{background:white;border-radius:16px;padding:24px;width:320px;box-shadow:0 10px 40px rgba(0,0,0,0.3);}
.modal-title{font-size:16px;font-weight:800;color:#1a1a1a;margin-bottom:12px;}
.modal-input{width:100%;padding:12px 14px;border:2px solid #ddd;border-radius:10px;font-size:15px;font-family:'Noto Sans KR',sans-serif;font-weight:600;outline:none;margin-bottom:14px;}
.modal-input:focus{border-color:#00d4aa;}
.modal-btns{display:flex;gap:8px;justify-content:flex-end;}
.modal-btn{padding:10px 20px;border-radius:10px;border:none;font-size:13px;font-weight:700;font-family:'Noto Sans KR',sans-serif;cursor:pointer;}
.modal-btn.cancel{background:#f0f0f0;color:#666;}
.modal-btn.ok{background:#00d4aa;color:#111;}
.modal-btn.ok:hover{background:#00b894;}

.toast{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.85);color:white;padding:16px 28px;border-radius:14px;font-size:15px;font-weight:600;z-index:9999;display:none;text-align:center;backdrop-filter:blur(10px);}
.toast.show{display:block;animation:fadeInOut 2.5s ease;}
@keyframes fadeInOut{0%{opacity:0;transform:translate(-50%,-50%) scale(0.9);}15%{opacity:1;transform:translate(-50%,-50%) scale(1);}75%{opacity:1;}100%{opacity:0;}}
</style>
</head>
<body>
<div class="toast" id="toast"></div>

<!-- Custom Modal -->
<div class="modal-overlay" id="modal">
  <div class="modal-box">
    <div class="modal-title" id="modalTitle">ÏÉà ÌöåÏõê Îì±Î°ù</div>
    <input class="modal-input" id="modalInput" placeholder="ÌöåÏõê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" autocomplete="off" onkeydown="if(event.key==='Enter')modalConfirm()"/>
    <div class="modal-btns">
      <button class="modal-btn cancel" onclick="closeModal()">Ï∑®ÏÜå</button>
      <button class="modal-btn ok" id="modalOk" onclick="modalConfirm()">Îì±Î°ù</button>
    </div>
  </div>
</div>

<!-- Confirm Modal -->
<div class="modal-overlay" id="confirmModal">
  <div class="modal-box">
    <div class="modal-title">üìÑ ÏÉà ÏùºÏßÄ ÎßåÎì§Í∏∞</div>
    <p style="font-size:13px;color:#666;margin-bottom:16px;">ÌòÑÏû¨ ÏùºÏßÄÎ•º Ï¥àÍ∏∞ÌôîÌïòÍ≥† ÏÉà ÏùºÏßÄÎ•º ÏãúÏûëÌïòÏãúÍ≤†ÏäµÎãàÍπå?</p>
    <div class="modal-btns">
      <button class="modal-btn cancel" onclick="closeConfirm()">Ï∑®ÏÜå</button>
      <button class="modal-btn ok" onclick="confirmNewPage()">ÏÉà ÏùºÏßÄ ÏãúÏûë</button>
    </div>
  </div>
</div>

<div class="member-bar" id="memberBar">
  <label>üë§</label>
  <div style="position:relative;flex:1;min-width:160px;max-width:280px;">
    <input class="member-search" id="memberSearch" placeholder="ÌöåÏõê Í≤ÄÏÉâ..." oninput="filterMembers()" onfocus="showMemberDropdown()" autocomplete="off"/>
    <div class="member-dropdown" id="memberDropdown"></div>
  </div>
  <input type="hidden" id="selectedMember" value=""/>
  <button class="mb" onclick="promptAddMember()">Ôºã ÏÉà ÌöåÏõê</button>
  <button class="mb" id="delMemberBtn" onclick="promptDeleteMember()" style="display:none;color:#ff6b6b;border-color:#ff6b6b;">üóë ÌöåÏõêÏÇ≠Ï†ú</button>
  <button class="mb" onclick="refreshMembers()" title="ÏÉàÎ°úÍ≥†Ïπ®">üîÑ</button>
  <span class="member-status" id="memberStatus"></span>
</div>

<div class="history-bar" id="historyBar">
  <span class="hist-label">üìã ÏùºÏßÄ:</span>
  <div id="histList" style="display:flex;gap:6px;overflow-x:auto;flex:1;"></div>
</div>

<div class="sheet" id="sheet">
  <div class="header"><h1>PT ÏùºÏßÄ</h1><div class="logo"><div class="logo-icon">B</div>BODY SPECTRUM</div></div>
  <div class="session-grid" id="sg"></div>
  <div class="memo-box" contenteditable="true" id="memoBox"></div>
  <table class="info-table">
    <tr><td class="lc">DATE</td><td class="vc" contenteditable="true" id="dateCell" style="font-weight:700;font-size:18px;"></td><td class="lc">HYDRATION</td><td class="vc"><div class="hydration-row" id="hr"></div></td></tr>
    <tr><td class="lc">SLEEP</td><td class="vc" contenteditable="true" id="sleepCell"></td><td class="lc">SUPPLEMENT</td><td class="vc" contenteditable="true" id="suppCell"></td></tr>
    <tr><td class="lc">BODY<br>PART</td><td class="bp" id="bpCell"><label><input type="checkbox"> CARDIO</label>&nbsp;<label><input type="checkbox"> FULL BODY</label>&nbsp;<label><input type="checkbox"> CORE</label><br><label><input type="checkbox"> ARMS</label>&nbsp;<label><input type="checkbox"> BACK</label>&nbsp;<label><input type="checkbox"> CHEST</label><br><label><input type="checkbox"> LEGS</label>&nbsp;<label><input type="checkbox"> SHOULDERS</label>&nbsp;<label><input type="checkbox"> OTHER</label></td><td class="lc">WARM-UP</td><td class="vc" contenteditable="true" id="warmupCell"></td></tr>
    <tr><td colspan="2"></td><td class="lc">COOL DOWN</td><td class="vc" contenteditable="true" id="cooldownCell"></td></tr>
  </table>
  <div class="tp-selector">
    <label>üéØ Ïö¥Îèô ÏÑ†ÌÉù:</label>
    <select class="tp-select" id="exSelect" onchange="onSelectExercise()"><option value="">-- Ïö¥ÎèôÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî --</option></select>
    <span class="tp-exercise-name" id="exNameEn"></span>
  </div>
  <div class="tp-header">TEACHING POINT</div>
  <div class="tp-photos-wrap">
    <div class="tp-panel" id="panelL">
      <div class="tp-panel-label">START POSITION</div>
      <button class="photo-remove" id="rmL" onclick="removePhoto('L')">‚úï</button>
      <img id="imgL" style="display:none;"/>
      <div class="tp-upload-btn" id="uplL" onclick="document.getElementById('fileL').click()"><div class="icon">üì∑</div>ÏãúÏûë ÏûêÏÑ∏<input type="file" id="fileL" accept="image/*" style="display:none" onchange="loadImg('L',event)"></div>
      <svg class="tp-svg" id="svgL"></svg>
    </div>
    <div class="tp-panel" id="panelR">
      <div class="tp-panel-label">EXECUTION</div>
      <button class="photo-remove" id="rmR" onclick="removePhoto('R')">‚úï</button>
      <img id="imgR" style="display:none;"/>
      <div class="tp-upload-btn" id="uplR" onclick="document.getElementById('fileR').click()"><div class="icon">üì∑</div>ÏàòÌñâ ÏûêÏÑ∏<input type="file" id="fileR" accept="image/*" style="display:none" onchange="loadImg('R',event)"></div>
      <svg class="tp-svg" id="svgR"></svg>
    </div>
  </div>
  <div class="cues" id="cues" style="display:none;"><div class="cues-t">KEY FORM CUES</div><div id="cuesContent"></div></div>
  <table class="ex-table">
    <thead><tr><th style="width:42%">NAME</th><th style="width:22%">Kg</th><th style="width:36%">SET/REPS</th></tr></thead>
    <tbody id="exB"><tr><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr><tr><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr><tr><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr><tr><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr><tr><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr><tr><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr></tbody>
  </table>
</div>

<div class="toolbar" id="toolbar">
  <button class="tb" onclick="addExRow()">Ôºã Ïö¥Îèô</button>
  <button class="tb new-btn" onclick="newPage()">üìÑ ÏÉà ÏùºÏßÄ</button>
  <button class="tb save-btn" id="saveBtn" onclick="saveToSheet()">üíæ Ï†ÄÏû•</button>
  <button class="tb cap" id="capBtn" onclick="captureAndSave()">üì∏ Ï∫°Ï≤ò</button>
</div>

<script>
const API_URL='https://script.google.com/macros/s/AKfycbxqRTS49BJSImR5ybOY7F4LdURzPoQID0fnF0JOCyo7e-pnm2xUf45HBL8u3PISV2zCDw/exec';

// Exercise DB
const DB={'Î∞îÎ≤® ÌîåÎû´ Î≤§ÏπòÌîÑÎ†àÏä§':{en:'Barbell Flat Bench Press',cat:'Í∞ÄÏä¥',start:['Í≤¨Í∞ëÍ≥®(Ïñ¥Íπ®Îºà)ÏùÑ Î™®ÏïÑ ÏïÑÎûòÎ°ú ÎãπÍ∏¥Îã§','Í∞ÄÏä¥ÏùÑ ÌôúÏßù Ìé¥Í≥† ÏïÑÏπòÎ•º ÎßåÎì†Îã§','Î∞úÎ∞îÎã•ÏùÑ Î∞îÎã•Ïóê Îã®Îã®Ìûà Í≥†Ï†ïÌïúÎã§','Í∑∏Î¶ΩÏùÄ Ïñ¥Íπ® ÎÑàÎπÑÏùò ÏïΩ 1.5Î∞∞'],exec:['Î∞îÎ•º Í∞ÄÏä¥ Ï§ëÏïô(Ïú†Îëê ÎùºÏù∏)ÏúºÎ°ú ÎÇ¥Î¶∞Îã§','ÌåîÍøàÏπò Í∞ÅÎèÑ ÏïΩ 75ÎèÑ Ïú†ÏßÄ','Í∞ÄÏä¥ ÏàòÏ∂ïÏùÑ ÎäêÎÅºÎ©∞ Î∞ÄÏñ¥ Ïò¨Î¶∞Îã§','ÏóâÎç©Ïù¥Í∞Ä Î≤§ÏπòÏóêÏÑú Îú®ÏßÄ ÏïäÎèÑÎ°ù!']},'Î∞îÎ≤® Ïù∏ÌÅ¥ÎùºÏù∏ Î≤§ÏπòÌîÑÎ†àÏä§':{en:'Barbell Incline Bench Press',cat:'Í∞ÄÏä¥',start:['Î≤§Ïπò Í∞ÅÎèÑ 30~45ÎèÑÎ°ú ÏÑ§Ï†ï','Í≤¨Í∞ëÍ≥®ÏùÑ Î™®ÏúºÍ≥† Îì±ÏùÑ Î∞ÄÏ∞©ÏãúÌÇ®Îã§','Í∑∏Î¶ΩÏùÄ Ïñ¥Íπ®Î≥¥Îã§ ÏïΩÍ∞Ñ ÎÑìÍ≤å','Î∞úÎ∞îÎã•ÏùÑ Î∞îÎã•Ïóê Í≥†Ï†ïÌïúÎã§'],exec:['Î∞îÎ•º ÏáÑÍ≥®Í≥º Ïú†Îëê ÏÇ¨Ïù¥Î°ú ÎÇ¥Î¶∞Îã§','ÌåîÍøàÏπòÍ∞Ä Í≥ºÎèÑÌïòÍ≤å Î≤åÏñ¥ÏßÄÏßÄ ÏïäÍ≤å','ÏÉÅÎ∂Ä Í∞ÄÏä¥ ÏàòÏ∂ïÏùÑ ÎäêÎÅºÎ©∞ Ïò¨Î¶∞Îã§','ÏÜêÎ™©Ïù¥ Í∫æÏù¥ÏßÄ ÏïäÎèÑÎ°ù Ï£ºÏùò']},'Îç§Î≤® ÌîåÎû´ Î≤§ÏπòÌîÑÎ†àÏä§':{en:'Dumbbell Flat Bench Press',cat:'Í∞ÄÏä¥',start:['Í≤¨Í∞ëÍ≥®ÏùÑ Î™®ÏúºÍ≥† Í∞ÄÏä¥ÏùÑ Ìé∏Îã§','Îç§Î≤®ÏùÑ Í∞ÄÏä¥ ÏúÑÏóêÏÑú ÌåîÏùÑ Ìé¥ÏÑú ÏãúÏûë','Î∞úÎ∞îÎã•ÏùÑ Î∞îÎã•Ïóê Îã®Îã®Ìûà Í≥†Ï†ï','ÏÜêÎ™©ÏùÄ Ï§ëÎ¶Ω Ïú†ÏßÄ'],exec:['Îç§Î≤®ÏùÑ Í∞ÄÏä¥ ÏñëÏòÜÏúºÎ°ú Ï≤úÏ≤úÌûà ÎÇ¥Î¶∞Îã§','ÌåîÍøàÏπò ÏïΩ 75ÎèÑ Ïú†ÏßÄ','Í∞ÄÏä¥ ÏàòÏ∂ïÏúºÎ°ú ÏúÑÎ°ú Î∞ÄÏñ¥ Ïò¨Î¶∞Îã§','ÏÉÅÎã®ÏóêÏÑú Îç§Î≤®ÏùÑ ÏÇ¥Ïßù Î™®ÏïÑÏ§ÄÎã§']},'Îç§Î≤® ÌîåÎùºÏù¥':{en:'Dumbbell Fly',cat:'Í∞ÄÏä¥',start:['Î≤§ÏπòÏóê ÎàÑÏõå Îç§Î≤®ÏùÑ Í∞ÄÏä¥ ÏúÑÎ°ú Îì†Îã§','ÌåîÍøàÏπòÎ•º ÏÇ¥Ïßù Íµ¨Î∂ÄÎ¶∞ ÏÉÅÌÉú Ïú†ÏßÄ','Í≤¨Í∞ëÍ≥®ÏùÑ Î™®ÏúºÍ≥† Í∞ÄÏä¥ÏùÑ Ìé∏Îã§','Î∞úÎ∞îÎã• Î∞îÎã•Ïóê Í≥†Ï†ï'],exec:['ÌÅ∞ ÎÇòÎ¨¥Î•º ÏïàÎìØ Ìò∏ Î™®Ïñë Í∂§Ï†Å Ïú†ÏßÄ','Í∞ÄÏä¥ ÎÜíÏù¥ÍπåÏßÄ ÏñëÌåîÏùÑ Î≤åÎ¶∞Îã§','Í∞ÄÏä¥ Ïä§Ìä∏Î†àÏπ≠ÏùÑ ÎäêÎÅºÍ≥† ÏàòÏ∂ïÏúºÎ°ú Î™®ÏùÄÎã§','ÌåîÍøàÏπò Í∞ÅÎèÑÎ•º ÏùºÏ†ïÌïòÍ≤å Ïú†ÏßÄ!']},'ÌéôÎç± ÌîåÎùºÏù¥ Î®∏Ïã†':{en:'Pec Deck Fly',cat:'Í∞ÄÏä¥',start:['Îì±ÏùÑ Ìå®ÎìúÏóê Î∞ÄÏ∞©ÏãúÌÇ®Îã§','ÏãúÌä∏ ÎÜíÏù¥: ÏÜêÏû°Ïù¥Í∞Ä Í∞ÄÏä¥ Ï§ëÏïô ÎÜíÏù¥','Í∞ÄÏä¥ÏùÑ Ìé¥Í≥† Ïñ¥Íπ®Í∞Ä ÎßêÎ¶¨ÏßÄ ÏïäÍ≤å','Î∞úÏùÑ Î∞îÎã•Ïóê ÏïàÏ†ïÏ†ÅÏúºÎ°ú ÎÜìÎäîÎã§'],exec:['Í∞ÄÏä¥ ÏàòÏ∂ïÏúºÎ°ú ÏñëÌåîÏùÑ Í∞ÄÏö¥Îç∞Î°ú Î™®ÏùÄÎã§','ÏµúÎåÄ ÏàòÏ∂ï ÏßÄÏ†êÏóêÏÑú 1~2Ï¥à Î≤ÑÌã¥Îã§','Ï≤úÏ≤úÌûà Î≤åÎ¶¨Î©∞ Í∞ÄÏä¥ Ïä§Ìä∏Î†àÏπ≠','Ïñ¥Íπ®Í∞Ä ÏïûÏúºÎ°ú ÎßêÎ¶¨ÏßÄ ÏïäÎèÑÎ°ù Ï£ºÏùò']},'ÏºÄÏù¥Î∏î ÌÅ¨Î°úÏä§Ïò§Î≤Ñ':{en:'Cable Crossover',cat:'Í∞ÄÏä¥',start:['ÏñëÏ™Ω ÏºÄÏù¥Î∏îÏùÑ ÎÜíÏùÄ ÏúÑÏπòÏóê ÏÑ§Ï†ï','Ìïú Î∞úÏùÑ ÏïûÏúºÎ°ú ÎÇ¥ÎîõÏñ¥ ÏïàÏ†ïÏûêÏÑ∏','ÏïΩÍ∞Ñ ÏïûÏúºÎ°ú Í∏∞Ïö∏Ïù∏Îã§','ÌåîÍøàÏπòÎ•º ÏÇ¥Ïßù Íµ¨Î∂ÄÎ¶∞Îã§'],exec:['Ïñë ÏÜêÏû°Ïù¥Î•º ÏïÑÎûò ÏïûÏ™ΩÏúºÎ°ú Î™®ÏùÄÎã§','ÏÜêÏù¥ ÎßåÎÇòÎäî ÏßÄÏ†êÏóêÏÑú 1~2Ï¥à ÏàòÏ∂ï','Ï≤úÏ≤úÌûà ÏõêÎûò ÏúÑÏπòÎ°ú ÎèåÏïÑÍ∞ÑÎã§','ÌíÄÎ¶¨ ÎÜíÏù¥Î°ú ÏûêÍ∑π Î∂ÄÏúÑ Ï°∞Ï†à Í∞ÄÎä•']},'Îî•Ïä§':{en:'Dips (Chest)',cat:'Í∞ÄÏä¥',start:['Îî•Ïä§Î∞îÎ•º Ïû°Í≥† ÌåîÏùÑ Ìé¥ÏÑú Î™∏ÏùÑ Îì†Îã§','ÏÉÅÏ≤¥Î•º ÏïΩ 30ÎèÑ ÏïûÏúºÎ°ú Í∏∞Ïö∏Ïù∏Îã§','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï§ÄÎã§','Ïñ¥Íπ®Î•º ÏïÑÎûòÎ°ú ÎÇ¥Î†§ ÏïàÏ†ïÏãúÌÇ®Îã§'],exec:['ÌåîÍøàÏπòÎ•º Íµ¨Î∂ÄÎ¶¨Î©∞ Ï≤úÏ≤úÌûà ÎÇ¥Î¶∞Îã§','ÌåîÍøàÏπò 90ÎèÑÍ∞Ä Îê†ÎïåÍπåÏßÄ ÎÇ¥Î¶∞Îã§','Í∞ÄÏä¥ ÌïòÎ∂Ä ÏàòÏ∂ïÏùÑ ÎäêÎÅºÎ©∞ Ïò¨Î¶∞Îã§','ÏÉÅÏ≤¥Î•º ÏÑ∏Ïö∞Î©¥ ÏÇºÎëê Ïö¥ÎèôÏù¥ Îê® Ï£ºÏùò!']},'Î∞îÎ≤® Î≤§Ìä∏Ïò§Î≤Ñ Î°úÏö∞':{en:'Barbell Bent-Over Row',cat:'Îì±',start:['ÏÉÅÏ≤¥Î•º ÏïΩ 45ÎèÑÎ°ú ÏàôÏù∏Îã§','ÌóàÎ¶¨Î•º Í≥ßÍ≤å Ïú†ÏßÄ (Ï§ëÎ¶Ω Ï≤ôÏ∂î)','Î¨¥Î¶éÏùÑ ÏÇ¥Ïßù Íµ¨Î∂ÄÎ¶∞Îã§','Í∑∏Î¶ΩÏùÄ Ïñ¥Íπ® ÎÑàÎπÑÎ°ú Ïû°ÎäîÎã§'],exec:['Î∞îÎ•º Î∞∞ÍºΩ Î∞©Ìñ•ÏúºÎ°ú ÎãπÍ∏¥Îã§','Í≤¨Í∞ëÍ≥®ÏùÑ Î™®ÏúºÎ©∞ ÏàòÏ∂ïÌïúÎã§','ÌåîÍøàÏπòÎ•º Îí§Î°ú Î≥¥ÎÇ∏Îã§','ÏÉÅÏ≤¥ Í∞ÅÎèÑÎ•º ÏùºÏ†ïÌïòÍ≤å Ïú†ÏßÄ!']},'T-Î∞î Î°úÏö∞':{en:'T-Bar Row',cat:'Îì±',start:['ÏãúÏÑ†ÏùÄ Ï†ÑÎ∞© Î∞îÎã• ÏïΩ 2m ÏùëÏãú','ÌóàÎ¶¨Î•º Í≥ßÍ≤å Ïú†ÏßÄ (Ï§ëÎ¶Ω Ï≤ôÏ∂î)','ÏÉÅÏ≤¥Î•º ÏïΩ 45ÎèÑÎ°ú ÏàôÏó¨ Í≥†Ï†ï','Î¨¥Î¶é ÏÇ¥Ïßù ÍµΩÌòÄ ÌïòÏ≤¥Î•º Í≥†Ï†ï'],exec:['Í≤¨Í∞ëÍ≥®ÏùÑ Î™®ÏúºÎ©∞ ÌåîÍøàÏπòÎ•º Îí§Î°ú ÎãπÍ∏¥Îã§','Î∞îÎ•º Î∞∞ÍºΩ(Î™ÖÏπò) Î∞©Ìñ•ÏúºÎ°ú ÎãπÍ∏¥Îã§','ÏΩîÏñ¥ Í∏¥Ïû• Ïú†ÏßÄ, Î∞òÎèô Í∏àÏßÄ!','Ï≤úÏ≤úÌûà ÎÇ¥Î¶¨Î©∞ Í¥ëÎ∞∞Í∑º Ïä§Ìä∏Î†àÏπ≠']},'ÏõêÏïî Îç§Î≤® Î°úÏö∞':{en:'One-Arm Dumbbell Row',cat:'Îì±',start:['Ìïú ÏÜêÍ≥º Í∞ôÏùÄ Ï™Ω Î¨¥Î¶éÏùÑ Î≤§ÏπòÏóê Ïò¨Î¶∞Îã§','ÌóàÎ¶¨Î•º Í≥ßÍ≤å, Îì±ÏùÄ Î∞îÎã•Í≥º ÌèâÌñâ','Î∞òÎåÄ ÏÜêÏúºÎ°ú Îç§Î≤®ÏùÑ Ïû°Í≥† ÌåîÏùÑ ÎäòÏñ¥Îú®Î¶∞Îã§','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï£ºÏñ¥ ÏÉÅÏ≤¥ ÌöåÏ†Ñ Î∞©ÏßÄ'],exec:['ÌåîÍøàÏπòÎ•º Ï≤úÏû•ÏúºÎ°ú Ïò¨Î¶∞Îã§Îäî ÎäêÎÇå','Í≤¨Í∞ëÍ≥®ÏùÑ Ï°∞Ïù¥Î©∞ ÏàòÏ∂ïÌïúÎã§','Îç§Î≤®ÏùÑ ÏóâÎç©Ïù¥ Î∞©Ìñ•ÏúºÎ°ú ÎãπÍ∏¥Îã§','ÏÉÅÏ≤¥Í∞Ä ÌöåÏ†ÑÌïòÏßÄ ÏïäÎèÑÎ°ù Ï£ºÏùò!']},'Î†õ ÌíÄÎã§Ïö¥':{en:'Lat Pulldown',cat:'Îì±',start:['ÌóàÎ≤ÖÏßÄÎ•º Ìå®Îìú ÏïÑÎûòÏóê Í≥†Ï†ïÌïúÎã§','ÎÑìÏùÄ Í∑∏Î¶Ω(Ïò§Î≤ÑÍ∑∏Î¶Ω)ÏúºÎ°ú Î∞îÎ•º Ïû°ÎäîÎã§','Í∞ÄÏä¥ÏùÑ Ìé¥Í≥† ÏïΩÍ∞Ñ Îí§Î°ú Í∏∞Ïö∏Ïù∏Îã§','Ïñ¥Íπ®Î•º ÏïÑÎûòÎ°ú ÎÇ¥Î†§ Í¥ëÎ∞∞Í∑º ÌôúÏÑ±Ìôî'],exec:['Î∞îÎ•º ÏáÑÍ≥®(Í∞ÄÏä¥ Ïïû)ÏúºÎ°ú ÎãπÍ∏¥Îã§','Í≤¨Í∞ëÍ≥®ÏùÑ ÏïÑÎûòÎ°ú ÎãπÍ∏∞Î©∞ ÏàòÏ∂ï','Ï≤úÏ≤úÌûà Ïò¨Î†§ ÏôÑÏ†ÑÌûà Ïä§Ìä∏Î†àÏπ≠','Î™© Îí§Î°ú ÎãπÍ∏∞Î©¥ ÏïàÎê®! Í∞ÄÏä¥ ÏïûÏúºÎ°ú!']},'ÏãúÌã∞Îìú ÏºÄÏù¥Î∏î Î°úÏö∞':{en:'Seated Cable Row',cat:'Îì±',start:['ÏÉÅÏ≤¥Îäî Î∞îÎ•¥Í≤å ÏÑ∏Ïö∞Í≥† ÏΩîÏñ¥Ïóê Ìûò','ÏÜêÏû°Ïù¥Î•º Ïû°ÎäîÎã§','Î∞úÏùÑ Ìíã ÌîåÎ†àÏù¥Ìä∏Ïóê Îã®Îã®Ìûà ÎîõÎäîÎã§','Í∞ÄÏä¥ÏùÑ Ìé¥Í≥† Îì±ÏùÑ Í≥ßÍ≤å Ïú†ÏßÄ'],exec:['Î∞îÎ•º ÌïòÎ≥µÎ∂Ä(Î∞∞ÍºΩ) Î∞©Ìñ•ÏúºÎ°ú ÎãπÍ∏¥Îã§','Í≤¨Í∞ëÍ≥®ÏùÑ Î™®ÏúºÎ©∞ Ïñ¥Íπ®Î•º Îí§Î°ú','ÌåîÍøàÏπòÎ•º ÎåÄÍ∞ÅÏÑ† ÏïÑÎûòÎ°ú ÎãπÍ≤®Ï§ÄÎã§','ÏÉÅÏ≤¥Î•º Í≥ºÎèÑÌïòÍ≤å ÏïûÎí§Î°ú ÌùîÎì§ÏßÄ ÏïäÍ∏∞!']},'ÌíÄÏóÖ':{en:'Pull-Up',cat:'Îì±',start:['Ïò§Î≤ÑÍ∑∏Î¶ΩÏúºÎ°ú Ïñ¥Íπ®Î≥¥Îã§ ÎÑìÍ≤å Ïû°ÎäîÎã§','Ï†ÑÏã†ÏùÑ ÎäòÏñ¥Îú®Î¶∞ Îç∞ÎìúÌñâ ÏûêÏÑ∏','Í≤¨Í∞ëÍ≥®ÏùÑ ÏïÑÎûòÎ°ú ÎãπÍ≤® ÌôúÏÑ±Ìôî','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï£ºÏñ¥ Î™∏ ÌùîÎì§Î¶º Î∞©ÏßÄ'],exec:['ÌÑ±Ïù¥ Î∞î ÏúÑÎ°ú Ïò¨ÎùºÏò¨ ÎïåÍπåÏßÄ ÎãπÍ∏¥Îã§','ÌåîÍøàÏπòÎ•º ÏïÑÎûòÎ°ú ÎãπÍ∏¥Îã§Îäî ÎäêÎÇå','Ï≤úÏ≤úÌûà ÎÇ¥Î†§ÏôÄ ÏôÑÏ†ÑÌûà Ïä§Ìä∏Î†àÏπ≠','Î∞òÎèôÏùÑ Ïì∞ÏßÄ ÎßêÍ≥† Í∑ºÏú° ÌûòÏúºÎ°úÎßå!']},'Îç∞ÎìúÎ¶¨ÌîÑÌä∏':{en:'Conventional Deadlift',cat:'Îì±',start:['Î∞úÏùÑ ÏóâÎç©Ïù¥ ÎÑàÎπÑÎ°ú, Î∞îÏóê Í∞ÄÍπùÍ≤å ÏÑ†Îã§','ÏóâÎç©Ïù¥Î•º Îí§Î°ú Î∞ÄÎ©∞ Î∞îÎ•º Ïû°ÎäîÎã§','Í∞ÄÏä¥ÏùÑ Ìé¥Í≥† ÌóàÎ¶¨Î•º Í≥ßÍ≤å Ïú†ÏßÄ','Ïñ¥Íπ®Í∞Ä Î∞î Î∞îÎ°ú ÏúÑÏóê ÏúÑÏπò'],exec:['ÏóâÎç©Ïù¥ÏôÄ Î¨¥Î¶éÏùÑ ÎèôÏãúÏóê Ìé¥Î©∞ Ïò¨Î¶∞Îã§','Î∞îÎäî Ìï≠ÏÉÅ Î™∏Ïóê Í∞ÄÍπåÏù¥ Î∂ôÏó¨Ïïº!','ÏôÑÏ†ÑÌûà ÏÑ† ÏûêÏÑ∏ÏóêÏÑú ÎëîÍ∑º ÏàòÏ∂ï','ÌóàÎ¶¨Í∞Ä ÏïÑÎãå ÏóâÎç©Ïù¥ÏôÄ Îã§Î¶¨Î°ú Îì§Ïñ¥Ïò¨Î¶∞Îã§']},'Î∞îÎ≤® Ïò§Î≤ÑÌó§Îìú ÌîÑÎ†àÏä§':{en:'Barbell OHP',cat:'Ïñ¥Íπ®',start:['Î∞îÎ•º ÏáÑÍ≥® Ïïû(Ïñ¥Íπ® ÎÜíÏù¥)ÏóêÏÑú Ïû°ÎäîÎã§','Î∞úÏùÄ Ïñ¥Íπ® ÎÑàÎπÑÎ°ú Î≤åÎ¶∞Îã§','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï£ºÏñ¥ ÌóàÎ¶¨ Î≥¥Ìò∏','ÌåîÍøàÏπòÎ•º ÏÇ¥Ïßù ÏïûÏúºÎ°ú ÏúÑÏπò'],exec:['Î∞îÎ•º Î®∏Î¶¨ ÏúÑÎ°ú ÏßÅÏÑ†ÏúºÎ°ú Î∞ÄÏñ¥ Ïò¨Î¶∞Îã§','Î∞îÍ∞Ä Ïù¥Îßà ÏßÄÎÇ† Îïå Î®∏Î¶¨Î•º ÏÇ¥Ïßù ÏïûÏúºÎ°ú','ÌåîÏùÑ ÏôÑÏ†ÑÌûà Ìé¥Í≥† Î∞îÍ∞Ä Í∑Ä ÏòÜÏóê','ÌóàÎ¶¨Î•º Í≥ºÎèÑÌïòÍ≤å Ï†ñÌûàÏßÄ ÏïäÍ∏∞!']},'Îç§Î≤® ÏàÑÎçî ÌîÑÎ†àÏä§':{en:'DB Shoulder Press',cat:'Ïñ¥Íπ®',start:['Îç§Î≤®ÏùÑ Í∑Ä ÎÜíÏù¥ÏóêÏÑú Îì§Í≥† ÏãúÏûë','Îì±ÏùÑ Î≤§ÏπòÏóê Î∞ÄÏ∞©','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï£ºÏñ¥ ÏïàÏ†ïÏÑ± ÌôïÎ≥¥','ÏÜêÎ™©ÏùÄ Ï§ëÎ¶Ω Ïú†ÏßÄ'],exec:['Î®∏Î¶¨ ÏúÑÎ°ú Î∞ÄÏñ¥ Ïò¨Î¶∞Îã§','ÏÉÅÎã®ÏóêÏÑú Îç§Î≤®ÏùÑ ÏÇ¥Ïßù Î™®ÏïÑÏ§ÄÎã§','Ï≤úÏ≤úÌûà Í∑Ä ÎÜíÏù¥ÍπåÏßÄ ÎÇ¥Î¶∞Îã§','Îì±ÏùÑ Í≥ºÎèÑÌïòÍ≤å Ï†ñÌûàÏßÄ ÏïäÍ∏∞!']},'Îç§Î≤® ÎûòÌÑ∞Îü¥ Î†àÏù¥Ï¶à':{en:'Lateral Raise',cat:'Ïñ¥Íπ®',start:['ÏñëÏÜêÏóê Í∞ÄÎ≤ºÏö¥ Îç§Î≤®ÏùÑ Ïû°Í≥† Î™∏ ÏòÜÏóê','ÌåîÍøàÏπòÎ•º ÏÇ¥Ïßù Íµ¨Î∂ÄÎ¶∞ ÏÉÅÌÉú Ïú†ÏßÄ','ÏÉÅÏ≤¥Î•º ÏïΩÍ∞Ñ ÏïûÏúºÎ°ú Í∏∞Ïö∏Ïù∏Îã§','Ïñ¥Íπ®Ïóê ÌûòÏùÑ ÎØ∏Î¶¨ ÎäêÍª¥ÎëîÎã§'],exec:['ÏñëÌåîÏùÑ ÏòÜÏúºÎ°ú Ïñ¥Íπ® ÎÜíÏù¥ÍπåÏßÄ Ïò¨Î¶∞Îã§','ÏÉàÎÅºÏÜêÍ∞ÄÎùΩÏù¥ ÏïΩÍ∞Ñ ÏúÑÎ•º Ìñ•ÌïòÍ≤å','Î∞òÎèôÏùÑ Ïì∞ÏßÄ ÏïäÎäîÎã§!','Ï≤úÏ≤úÌûà ÎÇ¥Î¶¨Î©∞ ÌÖêÏÖò Ïú†ÏßÄ']},'ÌéòÏù¥Ïä§ ÌíÄ':{en:'Face Pull',cat:'Ïñ¥Íπ®',start:['ÏºÄÏù¥Î∏îÏùÑ Îàà ÎÜíÏù¥Ïóê ÏÑ§Ï†ï','Î°úÌîÑÎ•º ÏñëÏÜêÏúºÎ°ú Ïû°ÎäîÎã§','Ìïú Î∞úÏùÑ Îí§Î°ú ÎπºÍ≥† ÏïàÏ†ï ÏûêÏÑ∏','Ïñ¥Íπ®Î•º Îí§Î°ú ÎãπÍ≤® ÌôúÏÑ±Ìôî'],exec:['Î°úÌîÑÎ•º ÏñºÍµ¥ ÏñëÏòÜÏúºÎ°ú ÎãπÍ∏¥Îã§','ÌåîÍøàÏπòÎ•º Îí§Î°ú Î≥¥ÎÇ∏Îã§','ÏµúÎåÄ ÏàòÏ∂ïÏóêÏÑú Ïô∏ÌöåÏ†Ñ Ï∂îÍ∞Ä','Í∞ÄÎ≤ºÏö¥ Î¨¥Í≤å, ÎßéÏùÄ Î∞òÎ≥µÏù¥ ÌïµÏã¨!']},'ÏïÑÎÜÄÎìú ÌîÑÎ†àÏä§':{en:'Arnold Press',cat:'Ïñ¥Íπ®',start:['Îç§Î≤®ÏùÑ Ïñ¥Íπ® ÏïûÏóêÏÑú ÏÜêÎ∞îÎã•Ïù¥ ÎÇòÎ•º Ìñ•ÌïòÍ≤å','ÌåîÍøàÏπòÎ•º Î™∏ ÏïûÏóê Î™®ÏùÄÎã§','Îì±ÏùÑ Í≥ßÍ≤å ÏÑ∏Ïö¥Îã§','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï§ÄÎã§'],exec:['Î∞ÄÏñ¥ Ïò¨Î¶¨Î©∞ ÏÜêÎ∞îÎã•Ïù¥ ÏïûÏùÑ Ìñ•ÌïòÎèÑÎ°ù ÌöåÏ†Ñ','Î®∏Î¶¨ ÏúÑÏóêÏÑú ÏôÑÏ†ÑÌûà Ìé∏Îã§','Ïó≠Î∞©Ìñ•ÏúºÎ°ú ÎèåÎ¶¨Î©∞ ÎÇ¥Î¶∞Îã§','Î∂ÄÎìúÎü¨Ïö¥ ÌöåÏ†ÑÏù¥ ÌïµÏã¨!']},'Î∞îÎ≤® Î∞± Ïä§ÏøºÌä∏':{en:'Back Squat',cat:'ÌïòÏ≤¥',start:['Î∞îÎ•º ÏäπÎ™®Í∑º ÏúÑÏóê Ïò¨Î¶∞Îã§','Î∞úÏùÑ Ïñ¥Íπ® ÎÑàÎπÑ, Î∞úÎÅù ÏïΩÍ∞Ñ Î∞îÍπ•','Í∞ÄÏä¥ÏùÑ Ìé¥Í≥† ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï§ÄÎã§','ÏãúÏÑ†ÏùÄ Ï†ÑÎ∞© 2~3mÎ•º Ìñ•ÌïúÎã§'],exec:['ÏóâÎç©Ïù¥Î•º Îí§Î°ú ÎπºÎ©∞ ÏïâÎäîÎã§','ÌóàÎ≤ÖÏßÄÍ∞Ä ÏµúÏÜå Î∞îÎã•Í≥º ÌèâÌñâÍπåÏßÄ','Î¨¥Î¶éÏù¥ Î∞úÎÅù Î∞©Ìñ•ÏùÑ Ìñ•ÌïòÎèÑÎ°ù!','Î∞úÎ∞îÎã• Ï†ÑÏ≤¥Î°ú Î∞ÄÏñ¥ Ïò¨ÎùºÏò®Îã§']},'Î†àÍ∑∏ ÌîÑÎ†àÏä§':{en:'Leg Press',cat:'ÌïòÏ≤¥',start:['Îì±ÏùÑ Ìå®ÎìúÏóê ÏôÑÏ†ÑÌûà Î∞ÄÏ∞©ÏãúÌÇ®Îã§','Î∞úÏùÑ Î∞úÌåêÏóê Ïñ¥Íπ® ÎÑàÎπÑÎ°ú Ïò¨Î¶∞Îã§','Î¨¥Î¶éÍ≥º Î∞úÎÅùÏù¥ Í∞ôÏùÄ Î∞©Ìñ•','ÏïàÏ†ÑÏû•ÏπòÎ•º ÌôïÏù∏ÌïúÎã§'],exec:['Î¨¥Î¶éÏù¥ 90ÎèÑÍ∞Ä Îê† ÎïåÍπåÏßÄ ÎÇ¥Î¶∞Îã§','Î∞úÎ∞îÎã• Ï†ÑÏ≤¥Î°ú Î∞ÄÏñ¥ Ïò¨Î¶∞Îã§','Î¨¥Î¶éÏùÑ ÏôÑÏ†ÑÌûà Ïû†Í∑∏ÏßÄ ÏïäÎäîÎã§','Î∞ú ÏúÑÏπòÎ°ú ÏûêÍ∑π Î∂ÄÏúÑ Ï°∞Ï†à Í∞ÄÎä•']},'Î£®ÎßàÎãàÏïà Îç∞ÎìúÎ¶¨ÌîÑÌä∏':{en:'Romanian DL',cat:'ÌïòÏ≤¥',start:['Î∞îÎ•º Ïñ¥Íπ® ÎÑàÎπÑÎ°ú Ïû°Í≥† Î∞îÎ°ú ÏÑ†Îã§','Î¨¥Î¶éÏùÑ ÏÇ¥Ïßù Íµ¨Î∂ÄÎ¶∞ Ï±Ñ Ïú†ÏßÄ','Í∞ÄÏä¥ÏùÑ Ìé¥Í≥† ÌóàÎ¶¨Î•º Í≥ßÍ≤å','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï§ÄÎã§'],exec:['ÏóâÎç©Ïù¥Î•º Îí§Î°ú Î∞ÄÎ©∞ ÏÉÅÏ≤¥Î•º ÏàôÏù∏Îã§','Î∞îÎ•º Îã§Î¶¨Ïóê Í∞ÄÍπùÍ≤å Î∂ôÏó¨ ÎÇ¥Î¶∞Îã§','ÌñÑÏä§Ìä∏ÎßÅ Ïä§Ìä∏Î†àÏπ≠ÏùÑ ÎäêÎÇÄÎã§','ÌóàÎ¶¨Î•º Îë•Í∏ÄÍ≤å ÎßêÎ©¥ ÏïàÎê®!']},'Î∞îÎ≤® Ìûô Ïì∞Îü¨Ïä§Ìä∏':{en:'Hip Thrust',cat:'ÌïòÏ≤¥',start:['Îì± ÏÉÅÎ∂ÄÎ•º Î≤§ÏπòÏóê Í∏∞ÎåÑÎã§','Î∞îÎ≤®ÏùÑ Í≥®Î∞ò ÏúÑÏóê Ïò¨Î¶∞Îã§','Î∞úÏùÑ Î∞îÎã•Ïóê Îã®Îã®Ìûà ÎîõÎäîÎã§','ÌÑ±ÏùÑ ÎãπÍ∏∞Í≥† ÏãúÏÑ†ÏùÑ ÏïûÏúºÎ°ú'],exec:['ÏóâÎç©Ïù¥Î•º ÏúÑÎ°ú Î∞ÄÏñ¥ Ïò¨Î¶∞Îã§','ÏÉÅÏ≤¥ÏôÄ ÌóàÎ≤ÖÏßÄÍ∞Ä ÏùºÏßÅÏÑ†Ïù¥ ÎêòÎèÑÎ°ù','ÏµúÍ≥†Ï†êÏóêÏÑú ÎëîÍ∑ºÏùÑ Í∞ïÌïòÍ≤å Ï•êÏñ¥Ïß†Îã§','Ï≤úÏ≤úÌûà ÎÇ¥Î¶∞Îã§']},'Î∂àÍ∞ÄÎ¶¨Ïïà Ïä§ÌîåÎ¶ø Ïä§ÏøºÌä∏':{en:'Bulgarian Split Squat',cat:'ÌïòÏ≤¥',start:['Îí∑Î∞úÎì±ÏùÑ Î≤§ÏπòÏóê Ïò¨Î†§ÎÜìÎäîÎã§','ÏïûÎ∞úÎ°ú Ï≤¥Ï§ëÏùÑ ÏßÄÌÉ±ÌïúÎã§','ÏÉÅÏ≤¥Î•º Í≥ßÍ≤å ÏÑ∏Ïö¥Îã§','ÏΩîÏñ¥Ïóê ÌûòÏùÑ Ï§ÄÎã§'],exec:['Ïïû ÌóàÎ≤ÖÏßÄÍ∞Ä Î∞îÎã•Í≥º ÌèâÌñâÍπåÏßÄ ÎÇ¥Î†§Í∞ÑÎã§','Ïïû Î¨¥Î¶éÏù¥ Î∞úÎÅùÏùÑ ÎÑòÏßÄ ÏïäÎèÑÎ°ù','ÏïûÎ∞úÎ°ú Î∞ÄÏñ¥ Ïò¨ÎùºÏò®Îã§','Í∑†ÌòïÏùÑ Ïú†ÏßÄÌïòÎ©∞ Ï≤úÏ≤úÌûà!']},'Î∞îÎ≤® Ïª¨':{en:'Barbell Curl',cat:'Ïù¥Îëê',start:['Î∞îÎ•º Ïñ¥Íπ® ÎÑàÎπÑ Ïñ∏ÎçîÍ∑∏Î¶ΩÏúºÎ°ú Ïû°ÎäîÎã§','ÌåîÍøàÏπòÎ•º Î™∏ ÏòÜÏóê Í≥†Ï†ïÌïúÎã§','ÏÉÅÏ≤¥Î•º Í≥ßÍ≤å ÏÑ∏Ïö¥Îã§','Ïñ¥Íπ®Î•º ÏïÑÎûòÎ°ú ÎÇ¥Î†§ ÏïàÏ†ïÏãúÌÇ®Îã§'],exec:['Î∞îÎ•º Ïñ¥Íπ® ÎÜíÏù¥ÍπåÏßÄ Ïª¨ÌïúÎã§','Ïù¥ÎëêÍ∑º ÏàòÏ∂ïÏùÑ ÎäêÎÇÄÎã§','Ï≤úÏ≤úÌûà ÎÇ¥Î¶∞Îã§','Î∞òÎèô Í∏àÏßÄ!']},'Ìï¥Î®∏ Ïª¨':{en:'Hammer Curl',cat:'Ïù¥Îëê',start:['Îç§Î≤®ÏùÑ ÏÜêÎ∞îÎã•Ïù¥ ÎßàÏ£º Î≥¥Í≤å Ïû°ÎäîÎã§','ÌåîÍøàÏπòÎ•º Î™∏Ïóê Í≥†Ï†ï','ÏÉÅÏ≤¥Î•º Í≥ßÍ≤å ÏÑ∏Ïö¥Îã§','Ïñ¥Íπ®Îäî ÏûêÏó∞Ïä§ÎüΩÍ≤å ÎÇ¥Î¶∞Îã§'],exec:['Ï§ëÎ¶Ω Í∑∏Î¶Ω Ïú†ÏßÄÌïòÎ©∞ Ïª¨ÌïúÎã§','ÌåîÍøàÏπòÍ∞Ä ÏïûÏúºÎ°ú ÎÇòÏò§ÏßÄ ÏïäÍ≤å','Ï≤úÏ≤úÌûà ÎÇ¥Î¶∞Îã§','Ìåî ÎëêÍªòÎ•º ÌÇ§Ïö∞Îäî ÌïµÏã¨ Ïö¥Îèô!']},'ÏºÄÏù¥Î∏î Ìë∏ÏãúÎã§Ïö¥':{en:'Cable Pushdown',cat:'ÏÇºÎëê',start:['ÎÜíÏùÄ ÌíÄÎ¶¨Ïóê Î∞î/Î°úÌîÑÎ•º Î∂ÄÏ∞©','ÌåîÍøàÏπòÎ•º Î™∏Ïóê Í≥†Ï†ïÌïúÎã§','ÏÉÅÏ≤¥Î•º ÏïΩÍ∞Ñ ÏïûÏúºÎ°ú Í∏∞Ïö∏Ïù∏Îã§','Ïñ¥Íπ®Î•º ÎÇ¥Î†§ ÏïàÏ†ïÏãúÌÇ®Îã§'],exec:['Î∞îÎ•º ÏïÑÎûòÎ°ú Î∞ÄÏñ¥ ÌåîÏùÑ ÏôÑÏ†ÑÌûà Ìé∏Îã§','ÏÇºÎëêÍ∑º ÏàòÏ∂ïÏùÑ ÎäêÎÇÄÎã§','Ï≤úÏ≤úÌûà Ïò¨Î¶∞Îã§','Î°úÌîÑ: ÌïòÎã®ÏóêÏÑú ÏñëÏ™ΩÏúºÎ°ú Î≤åÎ¶¨Í∏∞!']},'Ïä§Ïª¨ÌÅ¨Îü¨ÏÖî':{en:'Skull Crusher',cat:'ÏÇºÎëê',start:['Î≤§ÏπòÏóê ÎàÑÏõå EZÎ∞îÎ•º Ï¢ÅÏùÄ Í∑∏Î¶ΩÏúºÎ°ú','ÌåîÏùÑ Ìé¥ÏÑú Î∞îÎ•º Îì§Ïñ¥Ïò¨Î¶∞Îã§','ÌåîÍøàÏπòÎäî Ïñ¥Íπ® ÎÑàÎπÑÎ°ú Í≥†Ï†ï','Í≤¨Í∞ëÍ≥®ÏùÑ Î™®ÏïÑ ÏïàÏ†ïÏ†Å Í∏∞Î∞ò ÌôïÎ≥¥'],exec:['ÌåîÍøàÏπò Í≥†Ï†ï ÌõÑ Î∞îÎ•º Ïù¥ÎßàÏ™ΩÏúºÎ°ú ÎÇ¥Î¶∞Îã§','ÏÇºÎëêÍ∑º Ïä§Ìä∏Î†àÏπ≠ÏùÑ ÎäêÎÇÄÎã§','ÏÇºÎëêÍ∑ºÏúºÎ°ú Î∞ÄÏñ¥ Ïò¨Î¶∞Îã§','Î®∏Î¶¨ Îí§Ï™ΩÏúºÎ°ú ÎÇ¥Î¶¨Î©¥ Ïû•Îëê ÏûêÍ∑π UP']},'ÏºÄÏù¥Î∏î ÌÅ¨Îü∞Ïπò':{en:'Cable Crunch',cat:'ÏΩîÏñ¥',start:['ÎÜíÏùÄ ÌíÄÎ¶¨Ïóê Î°úÌîÑÎ•º Î∂ÄÏ∞©','Î¨¥Î¶éÏùÑ ÍøáÍ≥† Î°úÌîÑÎ•º Î®∏Î¶¨ ÏñëÏòÜÏóê Í≥†Ï†ï','ÏóâÎç©Ïù¥ ÏúÑÏπòÎ•º Í≥†Ï†ïÌïúÎã§','Î≥µÍ∑ºÏóê ÎØ∏Î¶¨ ÌûòÏùÑ ÎäêÍª¥ÎëîÎã§'],exec:['Î≥µÍ∑ºÏùÑ ÏàòÏ∂ïÌïòÎ©∞ Î∞îÎã•ÏúºÎ°ú Íµ¨Î∂ÄÎ¶∞Îã§','ÏóâÎç©Ïù¥Í∞Ä ÏõÄÏßÅÏù¥Î©¥ ÏïàÎêúÎã§!','Ï≤úÏ≤úÌûà ÎèåÏïÑÏò®Îã§','ÏàúÏàòÌïòÍ≤å Î≥µÍ∑ºÏúºÎ°úÎßå!']},'ÌñâÏûâ Î†àÍ∑∏ Î†àÏù¥Ï¶à':{en:'Hanging Leg Raise',cat:'ÏΩîÏñ¥',start:['ÌíÄÏóÖ Î∞îÏóê Îß§Îã¨Î¶∞Îã§','Îã§Î¶¨Î•º Î™®ÏùÄÎã§','Ïñ¥Íπ®Î•º ÏïÑÎûòÎ°ú ÎãπÍ≤® ÏïàÏ†ï','Î™∏ ÌùîÎì§Î¶ºÏùÑ ÏµúÏÜåÌôîÌïúÎã§'],exec:['Î≥µÍ∑º ÌûòÏúºÎ°ú Îã§Î¶¨Î•º Îì§Ïñ¥Ïò¨Î¶∞Îã§','Í∞ÄÎä•ÌïòÎ©¥ Î∞úÎÅùÏù¥ Î∞î ÎÜíÏù¥ÍπåÏßÄ','Ï≤úÏ≤úÌûà ÎÇ¥Î¶∞Îã§','Î∞òÎèô ÏµúÏÜåÌôî!']}};
const sel=document.getElementById('exSelect');let lc='';Object.keys(DB).forEach(n=>{const d=DB[n];if(d.cat!==lc){const og=document.createElement('optgroup');og.label=d.cat;sel.appendChild(og);lc=d.cat;}const o=document.createElement('option');o.value=n;o.textContent=n;sel.lastChild.appendChild(o);});
const CL='#e53935',CR='#1565C0';let ptsL=[],ptsR=[],idC=0;
function nid(){return 'p'+(++idC);}
function toast(msg){const t=document.getElementById('toast');t.textContent=msg;t.className='toast show';setTimeout(()=>t.className='toast',2500);}

// ‚ïê‚ïê‚ïê API ‚ïê‚ïê‚ïê
async function apiCall(data){try{const res=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'text/plain'},body:JSON.stringify(data)});return await res.json();}catch(err){return {success:false,error:err.message};}}
let allMembers=[];
async function loadMembers(){
  document.getElementById('memberStatus').textContent='Î°úÎî©Ï§ë...';
  try{const res=await fetch(API_URL+'?action=get_members');const data=await res.json();
  if(data.success){
    allMembers=data.members;
    document.getElementById('memberStatus').textContent=allMembers.length+'Î™Ö';
  }}
  catch(err){document.getElementById('memberStatus').textContent='Ïò§ÌîÑÎùºÏù∏';}
}
function refreshMembers(){
  toast('üîÑ ÏÉàÎ°úÍ≥†Ïπ®...');
  const cur=document.getElementById('selectedMember').value;
  loadMembers().then(()=>{
    // Check if currently selected member still exists
    if(cur && !allMembers.find(m=>m.name===cur)){
      document.getElementById('selectedMember').value='';
      document.getElementById('memberSearch').value='';
      document.getElementById('delMemberBtn').style.display='none';
      document.getElementById('historyBar').classList.remove('show');
      toast('‚ö†Ô∏è '+cur+' ÌöåÏõêÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§');
    } else {
      toast('‚úÖ ÏÉàÎ°úÍ≥†Ïπ® ÏôÑÎ£å!');
    }
  });
}
function filterMembers(){
  const q=document.getElementById('memberSearch').value.trim().toLowerCase();
  const dd=document.getElementById('memberDropdown');
  dd.innerHTML='';
  const filtered=q?allMembers.filter(m=>m.name.toLowerCase().includes(q)):allMembers;
  if(filtered.length===0){
    dd.innerHTML='<div class="member-item" style="color:#888;cursor:default;">Í≤ÄÏÉâ Í≤∞Í≥º ÏóÜÏùå</div>';
  } else {
    filtered.forEach(m=>{
      const item=document.createElement('div');
      item.className='member-item';
      item.innerHTML=m.name+'<span class="mi-sessions">'+(m.totalSessions||0)+'ÌöåÏ∞®</span>';
      // Use mousedown + touchend for iPad compatibility (fires before blur)
      item.addEventListener('mousedown',function(e){e.preventDefault();selectMember(m.name);});
      item.addEventListener('touchend',function(e){e.preventDefault();selectMember(m.name);});
      dd.appendChild(item);
    });
  }
  dd.classList.add('show');
}
function showMemberDropdown(){
  filterMembers();
}
function selectMember(name){
  document.getElementById('memberSearch').value=name;
  document.getElementById('selectedMember').value=name;
  document.getElementById('memberDropdown').classList.remove('show');
  document.getElementById('memberStatus').textContent=name;
  document.getElementById('delMemberBtn').style.display='';
  loadLogs(name);
}
// Close dropdown when clicking outside
document.addEventListener('click',function(e){
  if(!e.target.closest('.member-bar')){
    document.getElementById('memberDropdown').classList.remove('show');
  }
});
function onMemberChange(){
  const name=document.getElementById('selectedMember').value;
  if(name){loadLogs(name);}
  else{document.getElementById('historyBar').classList.remove('show');}
}
async function promptAddMember(){
  document.getElementById('modalTitle').textContent='ÏÉà ÌöåÏõê Îì±Î°ù';
  document.getElementById('modalInput').value='';
  document.getElementById('modalInput').placeholder='ÌöåÏõê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî';
  document.getElementById('modalOk').textContent='Îì±Î°ù';
  document.getElementById('modalOk').style.background='#00d4aa';
  currentModalAction='add';
  document.getElementById('modal').classList.add('show');
  setTimeout(()=>document.getElementById('modalInput').focus(),100);
}
function promptDeleteMember(){
  const name=document.getElementById('selectedMember').value;
  if(!name){toast('‚ö†Ô∏è ÌöåÏõêÏùÑ Î®ºÏ†Ä ÏÑ†ÌÉùÌïòÏÑ∏Ïöî!');return;}
  document.getElementById('confirmModal').querySelector('.modal-title').textContent='üóë ÌöåÏõê ÏÇ≠Ï†ú';
  document.getElementById('confirmModal').querySelector('p').textContent=name+' ÌöåÏõêÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÌï¥Îãπ ÌöåÏõêÏùò Î™®Îì† ÏùºÏßÄÍ∞Ä ÏÇ≠Ï†úÎê©ÎãàÎã§.';
  const okBtn=document.getElementById('confirmModal').querySelectorAll('.modal-btn')[1];
  okBtn.textContent='ÏÇ≠Ï†ú';
  okBtn.style.background='#e53935';
  okBtn.onclick=async()=>{
    closeConfirm();
    toast('‚è≥ ÏÇ≠Ï†úÏ§ë...');
    const res=await apiCall({action:'delete_member',member:name});
    if(res.success){
      toast('‚úÖ '+name+' ÏÇ≠Ï†ú ÏôÑÎ£å!');
      document.getElementById('selectedMember').value='';
      document.getElementById('memberSearch').value='';
      document.getElementById('delMemberBtn').style.display='none';
      document.getElementById('historyBar').classList.remove('show');
      loadMembers();
    }else{toast('‚ùå '+(res.error||'Ïã§Ìå®'));}
    resetConfirmModal();
  };
  document.getElementById('confirmModal').classList.add('show');
}
function resetConfirmModal(){
  const okBtn=document.getElementById('confirmModal').querySelectorAll('.modal-btn')[1];
  okBtn.textContent='ÏÉà ÏùºÏßÄ ÏãúÏûë';okBtn.style.background='#00d4aa';okBtn.onclick=()=>confirmNewPage();
  document.getElementById('confirmModal').querySelector('.modal-title').textContent='üìÑ ÏÉà ÏùºÏßÄ ÎßåÎì§Í∏∞';
  document.getElementById('confirmModal').querySelector('p').textContent='ÌòÑÏû¨ ÏùºÏßÄÎ•º Ï¥àÍ∏∞ÌôîÌïòÍ≥† ÏÉà ÏùºÏßÄÎ•º ÏãúÏûëÌïòÏãúÍ≤†ÏäµÎãàÍπå?';
}
let currentModalAction='add';
function closeModal(){document.getElementById('modal').classList.remove('show');}
async function modalConfirm(){
  const name=document.getElementById('modalInput').value.trim();
  if(!name){toast('‚ö†Ô∏è Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!');return;}
  closeModal();
  toast('‚è≥ Îì±Î°ùÏ§ë...');
  const res=await apiCall({action:'add_member',member:name});
  if(res.success){toast('‚úÖ '+name+' Îì±Î°ù!');loadMembers();selectMember(name);}
  else{toast('‚ùå '+(res.error||'Ïã§Ìå®'));}
}

// ‚ïê‚ïê‚ïê HISTORY ‚ïê‚ïê‚ïê
let logCache={};
async function loadLogs(name){
  try{const res=await fetch(API_URL+'?action=get_logs&member='+encodeURIComponent(name));const data=await res.json();
  if(data.success){
    const sessions=[];let cur=null;
    data.logs.forEach(row=>{
      const d=String(row.date||'');
      if(d.indexOf('‚îÄ‚îÄ‚îÄ‚îÄ')>=0){
        // Extract date from "‚îÄ‚îÄ‚îÄ‚îÄ 2/19 ‚îÄ‚îÄ‚îÄ‚îÄ"
        const dateStr=d.replace(/‚îÄ/g,'').trim();
        cur={date:dateStr,exercises:[],teachingPoints:[],tpName:'',
             sleep:row.sleep||'',supplement:row.supplement||'',
             warmup:row.warmup||'',cooldown:row.cooldown||''};
        sessions.push(cur);
      }else if(cur && d.indexOf('[Teaching Point')>=0){
        // Extract exercise name from "[Teaching Point - Î∞îÎ≤® ÌîåÎû´ Î≤§ÏπòÌîÑÎ†àÏä§]"
        cur.tpName=d.replace('[Teaching Point - ','').replace(']','').trim();
      }else if(cur && d.indexOf('‚Üí')>=0){
        cur.teachingPoints.push(d.replace(/^\s*‚Üí\s*/,''));
      }else if(cur && row.exercise){
        cur.exercises.push({name:row.exercise,kg:row.kg,setReps:row.setReps});
      }
    });
    logCache[name]=sessions;
    renderHistory(sessions);
  }}catch(err){console.error(err);}
}
function renderHistory(sessions){
  const bar=document.getElementById('historyBar');
  const list=document.getElementById('histList');
  list.innerHTML='';
  bar.classList.add('show');
  if(sessions.length===0){
    list.innerHTML='<span style="color:#888;font-size:11px;">Ï†ÄÏû•Îêú ÏùºÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§</span>';
    return;
  }
  sessions.forEach((s,i)=>{
    const wrap=document.createElement('div');
    wrap.style.cssText='display:flex;align-items:center;gap:2px;flex-shrink:0;';
    const chip=document.createElement('button');
    chip.className='hist-chip';
    chip.textContent=(i+1)+'ÌöåÏ∞® ('+s.date+')';
    chip.onclick=()=>loadSession(s,i,chip);
    wrap.appendChild(chip);
    const del=document.createElement('button');
    del.style.cssText='width:20px;height:20px;border-radius:50%;border:1px solid #555;background:transparent;color:#888;font-size:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;';
    del.textContent='‚úï';
    del.onmouseover=()=>{del.style.background='#e53935';del.style.color='white';del.style.borderColor='#e53935';};
    del.onmouseout=()=>{del.style.background='transparent';del.style.color='#888';del.style.borderColor='#555';};
    del.onclick=(e)=>{e.stopPropagation();deleteSession(i);};
    wrap.appendChild(del);
    list.appendChild(wrap);
  });
}
function loadSession(s,idx,chip){
  document.querySelectorAll('.hist-chip').forEach(c=>c.classList.remove('active'));
  chip.classList.add('active');
  // Fill date
  document.getElementById('dateCell').textContent=s.date;
  // Fill info fields
  document.getElementById('sleepCell').textContent=s.sleep||'';
  document.getElementById('suppCell').textContent=s.supplement||'';
  document.getElementById('warmupCell').textContent=s.warmup||'';
  document.getElementById('cooldownCell').textContent=s.cooldown||'';
  // Fill exercises
  const rows=document.getElementById('exB').querySelectorAll('tr');
  rows.forEach(r=>{r.querySelectorAll('td').forEach(c=>{c.textContent='';});});
  s.exercises.forEach((ex,i)=>{
    if(i>=document.getElementById('exB').querySelectorAll('tr').length) addExRow();
    const allRows=document.getElementById('exB').querySelectorAll('tr');
    if(i<allRows.length){
      const cells=allRows[i].querySelectorAll('td');
      cells[0].textContent=ex.name;cells[1].textContent=ex.kg;cells[2].textContent=ex.setReps;
    }
  });
  // Restore exercise selection
  if(s.tpName){
    const selEl=document.getElementById('exSelect');
    for(let i=0;i<selEl.options.length;i++){
      if(selEl.options[i].value===s.tpName){selEl.value=s.tpName;break;}
    }
    document.getElementById('exNameEn').textContent=(DB[s.tpName]||{}).en||'';
  }
  // Restore teaching points
  if(s.teachingPoints&&s.teachingPoints.length>0){
    const startPts=[];const execPts=[];
    s.teachingPoints.forEach(tp=>{
      if(tp.startsWith('[ÏãúÏûë] ')) startPts.push(tp.replace('[ÏãúÏûë] ',''));
      else if(tp.startsWith('[ÏàòÌñâ] ')) execPts.push(tp.replace('[ÏàòÌñâ] ',''));
      else startPts.push(tp);
    });
    ptsL=startPts.map((t,i)=>({id:nid(),text:t,dotX:50+(i%2)*10,dotY:15+i*22,lblX:3,lblY:5+i*24}));
    ptsR=execPts.map((t,i)=>({id:nid(),text:t,dotX:50+(i%2)*10,dotY:15+i*22,lblX:3,lblY:5+i*24}));
  } else if(s.tpName && DB[s.tpName]){
    // No saved TPs but exercise name exists - load from DB
    const d=DB[s.tpName];
    ptsL=d.start.map((t,i)=>({id:nid(),text:t,dotX:50+(i%2)*10,dotY:15+i*22,lblX:3,lblY:5+i*24}));
    ptsR=d.exec.map((t,i)=>({id:nid(),text:t,dotX:50+(i%2)*10,dotY:15+i*22,lblX:3,lblY:5+i*24}));
  } else {
    ptsL=[];ptsR=[];
  }
  renderAnns('L');renderAnns('R');renderCues();
  toast('üìã '+(idx+1)+'ÌöåÏ∞® Î∂àÎü¨Ïò¥');
}
// ‚ïê‚ïê‚ïê DELETE SESSION ‚ïê‚ïê‚ïê
function deleteSession(idx){
  const member=document.getElementById('selectedMember').value;
  if(!member)return;
  // Show confirm modal for delete
  document.getElementById('confirmModal').querySelector('.modal-title').textContent='üóë ÏùºÏßÄ ÏÇ≠Ï†ú';
  document.getElementById('confirmModal').querySelector('p').textContent=(idx+1)+'ÌöåÏ∞® ÏùºÏßÄÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?';
  const okBtn=document.getElementById('confirmModal').querySelectorAll('.modal-btn')[1];
  okBtn.textContent='ÏÇ≠Ï†ú';
  okBtn.style.background='#e53935';
  okBtn.onclick=async()=>{
    closeConfirm();
    toast('‚è≥ ÏÇ≠Ï†úÏ§ë...');
    const res=await apiCall({action:'delete_log',member:member,sessionIndex:idx});
    if(res.success){toast('‚úÖ ÏÇ≠Ï†ú ÏôÑÎ£å!');loadLogs(member);}
    else{toast('‚ùå '+(res.error||'Ïã§Ìå®'));}
    resetConfirmModal();
  };
  document.getElementById('confirmModal').classList.add('show');
}

// ‚ïê‚ïê‚ïê SAVE ‚ïê‚ïê‚ïê
async function saveToSheet(){
  const member=document.getElementById('selectedMember').value;
  if(!member){toast('‚ö†Ô∏è ÌöåÏõêÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî!');return;}
  const date=document.getElementById('dateCell').textContent.trim();
  if(!date){toast('‚ö†Ô∏è ÎÇ†ÏßúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî!');return;}
  const btn=document.getElementById('saveBtn');btn.textContent='‚è≥ Ï†ÄÏû•Ï§ë...';btn.classList.add('saving');
  const rows=document.getElementById('exB').querySelectorAll('tr');const exercises=[];
  rows.forEach(r=>{const cells=r.querySelectorAll('td');const name=(cells[0]||{}).textContent?.trim();if(name)exercises.push({name,kg:(cells[1]||{}).textContent?.trim(),setReps:(cells[2]||{}).textContent?.trim()});});
  const tps=[];ptsL.forEach(p=>tps.push('[ÏãúÏûë] '+p.text));ptsR.forEach(p=>tps.push('[ÏàòÌñâ] '+p.text));
  const res=await apiCall({action:'save_log',member,date,sleep:document.getElementById('sleepCell').textContent.trim(),supplement:document.getElementById('suppCell').textContent.trim(),warmup:document.getElementById('warmupCell').textContent.trim(),cooldown:document.getElementById('cooldownCell').textContent.trim(),exerciseName:document.getElementById('exSelect').value,exercises,teachingPoints:tps});
  if(res.success){toast('‚úÖ Ï†ÄÏû• ÏôÑÎ£å!');loadLogs(member);}else{toast('‚ùå '+(res.error||'Ïã§Ìå®'));}
  btn.textContent='üíæ Ï†ÄÏû•';btn.classList.remove('saving');
}

// ‚ïê‚ïê‚ïê NEW PAGE ‚ïê‚ïê‚ïê
function newPage(){
  document.getElementById('confirmModal').classList.add('show');
}
function closeConfirm(){document.getElementById('confirmModal').classList.remove('show');}
function confirmNewPage(){
  closeConfirm();
  document.getElementById('dateCell').textContent=getTodayStr();
  document.getElementById('sleepCell').textContent='';
  document.getElementById('suppCell').textContent='';
  document.getElementById('warmupCell').textContent='';
  document.getElementById('cooldownCell').textContent='';
  document.getElementById('memoBox').textContent='';
  document.getElementById('exSelect').value='';
  document.getElementById('exNameEn').textContent='';
  // Clear exercises
  const rows=document.getElementById('exB').querySelectorAll('tr');
  rows.forEach(r=>{r.querySelectorAll('td').forEach(c=>{c.textContent='';});});
  // Clear photos
  removePhoto('L');removePhoto('R');
  // Clear points
  ptsL=[];ptsR=[];
  document.getElementById('cues').style.display='none';
  document.getElementById('cuesContent').innerHTML='';
  // Clear checkboxes
  document.querySelectorAll('.bp input[type=checkbox]').forEach(c=>c.checked=false);
  // Clear hydration
  document.querySelectorAll('.h-dot').forEach(d=>d.classList.remove('filled'));
  // Clear session marks
  document.querySelectorAll('.session-num').forEach(s=>s.classList.remove('marked'));
  // Clear history highlight
  document.querySelectorAll('.hist-chip').forEach(c=>c.classList.remove('active'));
  toast('üìÑ ÏÉà ÏùºÏßÄÍ∞Ä Ï§ÄÎπÑÎêòÏóàÏäµÎãàÎã§!');
}

// ‚ïê‚ïê‚ïê PHOTO REMOVE ‚ïê‚ïê‚ïê
function removePhoto(side){
  const img=document.getElementById('img'+side);
  const upl=document.getElementById('upl'+side);
  const rm=document.getElementById('rm'+side);
  const fileInput=document.getElementById('file'+side);
  img.style.display='none';img.src='';
  upl.style.display='';
  rm.classList.remove('show');
  fileInput.value='';
  // Clear annotations on this side
  const panel=document.getElementById('panel'+side);
  panel.querySelectorAll('.ann,.dot').forEach(el=>el.remove());
  document.getElementById('svg'+side).innerHTML='';
}

// ‚ïê‚ïê‚ïê Teaching Points ‚ïê‚ïê‚ïê
function onSelectExercise(){const n=sel.value;if(!n)return;const d=DB[n];document.getElementById('exNameEn').textContent=d.en;ptsL=d.start.map((t,i)=>({id:nid(),text:t,dotX:50+(i%2)*10,dotY:15+i*22,lblX:3,lblY:5+i*24}));ptsR=d.exec.map((t,i)=>({id:nid(),text:t,dotX:50+(i%2)*10,dotY:15+i*22,lblX:3,lblY:5+i*24}));renderAnns('L');renderAnns('R');renderCues();}
function loadImg(s,e){const f=e.target.files[0];if(!f)return;const r=new FileReader();r.onload=ev=>{const img=document.getElementById('img'+s);img.onload=()=>{img.style.display='block';document.getElementById('upl'+s).style.display='none';document.getElementById('rm'+s).classList.add('show');renderAnns(s);renderCues();};img.src=ev.target.result;};r.readAsDataURL(f);}
function renderAnns(s){const p=document.getElementById('panel'+s),sv=document.getElementById('svg'+s),pts=s==='L'?ptsL:ptsR,c=s==='L'?CL:CR;p.querySelectorAll('.ann,.dot').forEach(e=>e.remove());sv.innerHTML='';pts.forEach((pt,i)=>{const l=document.createElement('div');l.className='ann';l.style.borderColor=c;l.style.color=c;l.style.left=pt.lblX+'%';l.style.top=pt.lblY+'%';l.dataset.id=pt.id;l.dataset.side=s;l.innerHTML='<span class="n" style="background:'+c+'">'+(i+1)+'</span><span class="ann-txt">'+pt.text+'</span><button class="del-ann" onclick="delPt(\''+s+'\',\''+pt.id+'\')">‚úï</button>';mkD(l,pt,'lbl',s);p.appendChild(l);const d=document.createElement('div');d.className='dot';d.style.background=c;d.style.left=pt.dotX+'%';d.style.top=pt.dotY+'%';mkD(d,pt,'dot',s);p.appendChild(d);const ln=document.createElementNS('http://www.w3.org/2000/svg','line');ln.id='ln-'+pt.id;ln.setAttribute('x1',pt.lblX+'%');ln.setAttribute('y1',pt.lblY+'%');ln.setAttribute('x2',pt.dotX+'%');ln.setAttribute('y2',pt.dotY+'%');ln.setAttribute('stroke',c);ln.setAttribute('stroke-width','1.5');ln.setAttribute('stroke-opacity','0.6');sv.appendChild(ln);});}
function mkD(el,pt,t,s){let sx,sy,spx,spy;function st(e){if(document.body.classList.contains('capture'))return;e.preventDefault();e.stopPropagation();const tc=e.touches?e.touches[0]:e;sx=tc.clientX;sy=tc.clientY;spx=t==='dot'?pt.dotX:pt.lblX;spy=t==='dot'?pt.dotY:pt.lblY;function mv(ev){ev.preventDefault();const m=ev.touches?ev.touches[0]:ev;const r=document.getElementById('panel'+s).getBoundingClientRect();const dx=((m.clientX-sx)/r.width)*100,dy=((m.clientY-sy)/r.height)*100;let nx=Math.max(0,Math.min(95,spx+dx)),ny=Math.max(0,Math.min(95,spy+dy));if(t==='dot'){pt.dotX=nx;pt.dotY=ny;}else{pt.lblX=nx;pt.lblY=ny;}el.style.left=nx+'%';el.style.top=ny+'%';const ln=document.getElementById('ln-'+pt.id);if(ln){ln.setAttribute('x1',pt.lblX+'%');ln.setAttribute('y1',pt.lblY+'%');ln.setAttribute('x2',pt.dotX+'%');ln.setAttribute('y2',pt.dotY+'%');}}function en(){document.removeEventListener('mousemove',mv);document.removeEventListener('mouseup',en);document.removeEventListener('touchmove',mv);document.removeEventListener('touchend',en);}document.addEventListener('mousemove',mv,{passive:false});document.addEventListener('mouseup',en);document.addEventListener('touchmove',mv,{passive:false});document.addEventListener('touchend',en);}el.addEventListener('mousedown',st);el.addEventListener('touchstart',st,{passive:false});}
function delPt(s,id){if(s==='L')ptsL=ptsL.filter(p=>p.id!==id);else ptsR=ptsR.filter(p=>p.id!==id);renderAnns(s);renderCues();}
function addPt(s){const pts=s==='L'?ptsL:ptsR;pts.push({id:nid(),text:'ÏÉà Ìè¨Ïù∏Ìä∏ ÏûÖÎ†•',dotX:50,dotY:50,lblX:10,lblY:10+pts.length*20});renderAnns(s);renderCues();}
function renderCues(){document.getElementById('cues').style.display='block';const c=document.getElementById('cuesContent');c.innerHTML='';const sL=document.createElement('div');sL.className='cues-sub-row';sL.innerHTML='<span class="cues-sub" style="color:'+CL+'">‚ñéÏãúÏûë ÏûêÏÑ∏ (START)</span><button class="add-cue-btn" onclick="addPt(\'L\')">Ôºã Ï∂îÍ∞Ä</button>';c.appendChild(sL);ptsL.forEach((p,i)=>{const r=document.createElement('div');r.className='cue';r.innerHTML='<div class="cn" style="background:'+CL+'">'+(i+1)+'</div><input class="cue-text" value="'+p.text+'" oninput="upTxt(\'L\',\''+p.id+'\',this.value)"/><button class="cue-del" onclick="delPt(\'L\',\''+p.id+'\')">‚úï</button>';c.appendChild(r);});const sR=document.createElement('div');sR.className='cues-sub-row';sR.innerHTML='<span class="cues-sub" style="color:'+CR+'">‚ñéÏàòÌñâ ÏûêÏÑ∏ (EXECUTION)</span><button class="add-cue-btn" onclick="addPt(\'R\')">Ôºã Ï∂îÍ∞Ä</button>';c.appendChild(sR);ptsR.forEach((p,i)=>{const r=document.createElement('div');r.className='cue';r.innerHTML='<div class="cn" style="background:'+CR+'">'+(i+1)+'</div><input class="cue-text" value="'+p.text+'" oninput="upTxt(\'R\',\''+p.id+'\',this.value)"/><button class="cue-del" onclick="delPt(\'R\',\''+p.id+'\')">‚úï</button>';c.appendChild(r);});}
function upTxt(s,id,v){const pts=s==='L'?ptsL:ptsR;const p=pts.find(x=>x.id===id);if(p){p.text=v;const panel=document.getElementById('panel'+s);const a=panel.querySelector('.ann[data-id="'+id+'"] .ann-txt');if(a)a.textContent=v;}}

// ‚ïê‚ïê‚ïê CAPTURE ‚ïê‚ïê‚ïê
async function captureAndSave(){const btn=document.getElementById('capBtn');btn.textContent='‚è≥ Ï†ÄÏû•Ï§ë...';btn.classList.add('saving');document.body.classList.add('capture');document.getElementById('toolbar').style.display='none';await new Promise(r=>setTimeout(r,300));try{const sheet=document.getElementById('sheet');const canvas=await html2canvas(sheet,{scale:2,useCORS:true,backgroundColor:'#ffffff',logging:false});canvas.toBlob(function(blob){const url=URL.createObjectURL(blob);const link=document.createElement('a');const d=new Date();const fn='PTÏùºÏßÄ_'+d.getFullYear()+String(d.getMonth()+1).padStart(2,'0')+String(d.getDate()).padStart(2,'0')+'_'+String(d.getHours()).padStart(2,'0')+String(d.getMinutes()).padStart(2,'0')+'.png';link.href=url;link.download=fn;document.body.appendChild(link);link.click();document.body.removeChild(link);if(navigator.share&&navigator.canShare){const file=new File([blob],fn,{type:'image/png'});if(navigator.canShare({files:[file]})){navigator.share({files:[file],title:'PT ÏùºÏßÄ'}).catch(()=>{});}}setTimeout(()=>URL.revokeObjectURL(url),5000);toast('‚úÖ Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•!');},'image/png',1.0);}catch(err){toast('‚ùå Ï∫°Ï≤ò Ïã§Ìå®');}document.body.classList.remove('capture');document.getElementById('toolbar').style.display='flex';btn.textContent='üì∏ Ï∫°Ï≤ò';btn.classList.remove('saving');}

// ‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê
function getTodayStr(){const d=new Date();return(d.getMonth()+1)+'/'+d.getDate();}
const sgEl=document.getElementById('sg');for(let i=1;i<=40;i++){const d=document.createElement('div');d.className='session-num';d.textContent=i;d.style.cursor='pointer';d.onclick=()=>d.classList.toggle('marked');sgEl.appendChild(d);}
const hrc=document.getElementById('hr');for(let i=0;i<8;i++){const d=document.createElement('div');d.className='h-dot';d.onclick=()=>{hrc.querySelectorAll('.h-dot').forEach((x,j)=>x.classList.toggle('filled',j<=i));};hrc.appendChild(d);}
function addExRow(){const b=document.getElementById('exB');const r=document.createElement('tr');r.innerHTML='<td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td>';b.appendChild(r);}
document.getElementById('dateCell').textContent=getTodayStr();
loadMembers();
</script>
</body>
</html>
